<!DOCTYPE html>
<html lang="id" class="transition-colors duration-300">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard TopUp - AlipzzyShop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }

        /* Custom style untuk sidebar mobile */
        .sidebar {
            transition: transform 0.3s ease-in-out;
            transform: translateX(-100%);
        }
        .sidebar.open {
            transform: translateX(0);
        }
    </style>
    <!-- Icon untuk Menu (Hamburger), Tutup, dan Mode Terang/Gelap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- SCRIPT 1: FOUC Prevention & Session Check -->
    <script>
        // Logika Mode Gelap (Harus dijalankan sebelum rendering body untuk mencegah FOUC - Flash of Unstyled Content)
        const storedTheme = localStorage.getItem('alipzzy_theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        let currentTheme = 'light';
        if (storedTheme === 'dark' || (!storedTheme && prefersDark)) {
            currentTheme = 'dark';
        }
        
        if (currentTheme === 'dark') {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }

        // Verifikasi sesi login
        const user = localStorage.getItem('alipzzy_loggedInUser');
        if (!user) {
            window.location.href = 'Login.html';
        }
    </script>
</head>
<!-- Body menggunakan Light mode default, dan dark: untuk mode gelap (biru tua) -->
<body class="bg-gray-50 dark:bg-slate-900 min-h-screen transition-colors duration-300">

    <!-- Sidebar (Menu Navigasi Mobile) -->
    <div id="sidebar" class="sidebar fixed top-0 left-0 w-64 h-full bg-white dark:bg-gray-800 z-40 shadow-xl lg:hidden">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-indigo-600 dark:text-indigo-400">Menu Utama</h2>
                <button id="closeSidebar" class="text-gray-600 dark:text-gray-300 hover:text-red-500 transition">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <nav class="space-y-3">
                <!-- Pilihan Menu -->
                <button onclick="handleMenuClick('CS')" class="flex items-center w-full p-3 rounded-lg text-left text-gray-700 dark:text-gray-200 hover:bg-indigo-50 dark:hover:bg-gray-700 hover:text-indigo-600 transition">
                    <i class="fas fa-headset w-5 mr-3"></i> CS
                </button>
                <button onclick="handleMenuClick('Owner')" class="flex items-center w-full p-3 rounded-lg text-left text-gray-700 dark:text-gray-200 hover:bg-indigo-50 dark:hover:bg-gray-700 hover:text-indigo-600 transition">
                    <i class="fas fa-user-circle w-5 mr-3"></i> Owner Website
                </button>
                <button onclick="handleMenuClick('About')" class="flex items-center w-full p-3 rounded-lg text-left text-gray-700 dark:text-gray-200 hover:bg-indigo-50 dark:hover:bg-gray-700 hover:text-indigo-600 transition">
                    <i class="fas fa-info-circle w-5 mr-3"></i> About
                </button>
                <hr class="my-4 border-gray-200 dark:border-gray-700">
                <button onclick="handleMenuClick('Exit')" class="flex items-center w-full p-3 rounded-lg text-left text-white bg-red-500 hover:bg-red-600 transition font-semibold">
                    <i class="fas fa-sign-out-alt w-5 mr-3"></i> Exit (Kembali ke TopUp)
                </button>
            </nav>
        </div>
    </div>
    <!-- Overlay untuk menutup sidebar saat di luar area menu -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden lg:hidden"></div>

    <!-- Header / Navbar -->
    <header class="bg-white dark:bg-gray-800 shadow-md sticky top-0 z-20 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <!-- Tombol Menu (Hanya Tampil di Mobile) -->
            <button id="openSidebar" class="text-gray-700 dark:text-gray-300 lg:hidden hover:text-indigo-600 transition">
                <i class="fas fa-bars text-2xl"></i>
            </button>
            
            <!-- Logo dan Nama Website -->
            <div class="flex items-center space-x-3">
                <img src="https://files.catbox.moe/l7eq6o.jpg" alt="Logo AlipzzyShop" class="w-10 h-10 rounded-full shadow-sm">
                <span class="text-xl font-extrabold text-indigo-700 dark:text-indigo-400">AlipzzyShop</span>
            </div>

            <!-- Navigasi Desktop & Mode Toggle -->
            <div class="flex items-center space-x-4">
                <nav class="hidden lg:flex space-x-4">
                    <button onclick="handleMenuClick('CS')" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 transition font-medium">CS</button>
                    <button onclick="handleMenuClick('Owner')" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 transition font-medium">Owner Website</button>
                    <button onclick="handleMenuClick('About')" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 transition font-medium">About</button>
                    <button onclick="logout()" class="text-red-500 hover:text-red-700 transition font-medium">Logout</button>
                </nav>
                
                <!-- Dark/Light Mode Toggle -->
                <button id="themeToggle" class="p-2 rounded-full text-gray-700 dark:text-yellow-400 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition duration-200 shadow-inner">
                    <!-- Ikon akan diubah oleh JavaScript setelah DOM siap -->
                    <i class="fas fa-moon text-lg"></i> 
                </button>
            </div>
        </div>
    </header>

    <!-- Konten Utama -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-6 border-b pb-2 border-indigo-200 dark:border-indigo-600 transition-colors duration-300">Pilih Game TopUp</h1>

        <!-- Daftar Game -->
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-10">
            <!-- Kartu Game 1: Free Fire -->
            <div onclick="selectGame('Free Fire')" class="game-card p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg dark:shadow-indigo-900/50 hover:shadow-xl transform hover:scale-[1.02] transition duration-300 cursor-pointer border-2 border-transparent hover:border-indigo-500" data-game="Free Fire">
                <img src="https://placehold.co/150x150/FF4500/ffffff?text=Free+Fire" alt="Free Fire" class="w-full h-auto rounded-lg mb-2 object-cover">
                <p class="text-center font-semibold text-gray-800 dark:text-white">Free Fire</p>
                <p class="text-center text-xs text-gray-500 dark:text-gray-400">ID Game</p>
            </div>
            
            <!-- Kartu Game 2: Mobile Legend -->
            <div onclick="selectGame('Mobile Legend')" class="game-card p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg dark:shadow-indigo-900/50 hover:shadow-xl transform hover:scale-[1.02] transition duration-300 cursor-pointer border-2 border-transparent hover:border-indigo-500" data-game="Mobile Legend">
                <img src="https://placehold.co/150x150/4169E1/ffffff?text=Mobile+Legend" alt="Mobile Legend" class="w-full h-auto rounded-lg mb-2 object-cover">
                <p class="text-center font-semibold text-gray-800 dark:text-white">Mobile Legend</p>
                <p class="text-center text-xs text-gray-500 dark:text-gray-400">ID Game (Server)</p>
            </div>

            <!-- Kartu Game 3: Pubg Mobile -->
            <div onclick="selectGame('Pubg Mobile')" class="game-card p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg dark:shadow-indigo-900/50 hover:shadow-xl transform hover:scale-[1.02] transition duration-300 cursor-pointer border-2 border-transparent hover:border-indigo-500" data-game="Pubg Mobile">
                <img src="https://placehold.co/150x150/008000/ffffff?text=Pubg+Mobile" alt="Pubg Mobile" class="w-full h-auto rounded-lg mb-2 object-cover">
                <p class="text-center font-semibold text-gray-800 dark:text-white">Pubg Mobile</p>
                <p class="text-center text-xs text-gray-500 dark:text-gray-400">ID Game</p>
            </div>

            <!-- Kartu Game 4: Valorant -->
            <div onclick="selectGame('Valorant')" class="game-card p-4 bg-white dark:bg-gray-700 rounded-xl shadow-lg dark:shadow-indigo-900/50 hover:shadow-xl transform hover:scale-[1.02] transition duration-300 cursor-pointer border-2 border-transparent hover:border-indigo-500" data-game="Valorant">
                <img src="https://placehold.co/150x150/FF6347/ffffff?text=Valorant" alt="Valorant" class="w-full h-auto rounded-lg mb-2 object-cover">
                <p class="text-center font-semibold text-gray-800 dark:text-white">Valorant</p>
                <p class="text-center text-xs text-gray-500 dark:text-gray-400">ID Game</p>
            </div>
        </div>

        <!-- Formulir TopUp (Tampilkan setelah game dipilih) -->
        <div id="topupFormContainer" class="hidden bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl transition-all duration-300 border-t-4 border-indigo-500">
            <h2 id="formTitle" class="text-2xl font-bold text-gray-800 dark:text-white mb-4">TopUp:</h2>
            
            <form>
                <!-- Input ID Game -->
                <div class="mb-4">
                    <label for="gameID" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Masukkan ID Game Anda</label>
                    <div id="idInputHint" class="text-xs text-red-500 dark:text-red-400 mb-2"></div>
                    <input type="text" id="gameID" name="gameID" required class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 bg-white dark:bg-gray-700 text-gray-800 dark:text-white" placeholder="Cth: 12345678 (Mobile Legend ID) / 1234 (Server)">
                </div>

                <!-- Pilihan Nominal -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Pilih Nominal TopUp</label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <!-- Nominal Card 1 -->
                        <label class="block cursor-pointer">
                            <input type="radio" name="nominal" value="100 Diamonds" class="hidden" required>
                            <div class="nominal-card p-3 text-center bg-indigo-50 dark:bg-gray-700 rounded-lg border-2 border-transparent hover:border-indigo-500 transition duration-150 text-indigo-700 dark:text-indigo-400">
                                <span class="font-semibold">100 Diamond</span>
                                <span class="block text-xs text-gray-500 dark:text-gray-400">Rp 10.000</span>
                            </div>
                        </label>
                        <!-- Nominal Card 2 -->
                        <label class="block cursor-pointer">
                            <input type="radio" name="nominal" value="250 Diamonds" class="hidden">
                            <div class="nominal-card p-3 text-center bg-indigo-50 dark:bg-gray-700 rounded-lg border-2 border-transparent hover:border-indigo-500 transition duration-150 text-indigo-700 dark:text-indigo-400">
                                <span class="font-semibold">250 Diamond</span>
                                <span class="block text-xs text-gray-500 dark:text-gray-400">Rp 25.000</span>
                            </div>
                        </label>
                        <!-- Nominal Card 3 -->
                        <label class="block cursor-pointer">
                            <input type="radio" name="nominal" value="500 Diamonds" class="hidden">
                            <div class="nominal-card p-3 text-center bg-indigo-50 dark:bg-gray-700 rounded-lg border-2 border-transparent hover:border-indigo-500 transition duration-150 text-indigo-700 dark:text-indigo-400">
                                <span class="font-semibold">500 Diamond</span>
                                <span class="block text-xs text-gray-500 dark:text-gray-400">Rp 50.000</span>
                            </div>
                        </label>
                        <!-- Nominal Card 4 -->
                        <label class="block cursor-pointer">
                            <input type="radio" name="nominal" value="Weekly Pass" class="hidden">
                            <div class="nominal-card p-3 text-center bg-indigo-50 dark:bg-gray-700 rounded-lg border-2 border-transparent hover:border-indigo-500 transition duration-150 text-indigo-700 dark:text-indigo-400">
                                <span class="font-semibold">Weekly Pass</span>
                                <span class="block text-xs text-gray-500 dark:text-gray-400">Rp 15.000</span>
                            </div>
                        </label>
                    </div>
                </div>

                <button type="button" onclick="checkout()" class="w-full text-white py-3 rounded-lg bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50 font-bold transition duration-150 shadow-lg">
                    Checkout Sekarang
                </button>
            </form>
        </div>

        <!-- Modal (Pengganti Alert/Confirm) -->
        <div id="customModal" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center hidden">
            <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-sm m-4 transform transition-all duration-300">
                <h3 id="modalTitle" class="text-xl font-bold text-gray-800 dark:text-white mb-3">Informasi</h3>
                <p id="modalContent" class="text-gray-700 dark:text-gray-300 mb-5"></p>
                <div class="flex justify-end space-x-3">
                    <button id="modalCloseButton" class="px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition">Tutup</button>
                </div>
            </div>
        </div>

    </main>

    <!-- SCRIPT 2: All Interaction Logic -->
    <script>
        // --- Referensi Elemen DOM ---
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        const topupFormContainer = document.getElementById('topupFormContainer');
        const formTitle = document.getElementById('formTitle');
        const idInputHint = document.getElementById('idInputHint');
        const themeToggle = document.getElementById('themeToggle'); // Referensi dijamin ada di sini
        
        let selectedGame = null;

        // Modal Elements
        const modal = document.getElementById('customModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');
        const modalCloseButton = document.getElementById('modalCloseButton');
        modalCloseButton.addEventListener('click', () => modal.classList.add('hidden'));

        // Fungsi untuk menampilkan Modal
        function showModal(title, content) {
            modalTitle.textContent = title;
            modalContent.innerHTML = content;
            modal.classList.remove('hidden');
        }
        
        // --- Logika Dark/Light Mode ---
        
        // Fungsi untuk mengatur Ikon berdasarkan state gelap
        function updateThemeIcon(isDark) {
            if (isDark) {
                // Saat gelap, tampilkan ikon Matahari
                themeToggle.innerHTML = '<i class="fas fa-sun text-lg"></i>';
            } else {
                // Saat terang, tampilkan ikon Bulan
                themeToggle.innerHTML = '<i class="fas fa-moon text-lg"></i>';
            }
        }

        // Fungsi untuk mengganti tema
        function toggleTheme() {
            const html = document.documentElement;
            // ClassList.toggle mengembalikan true jika class ditambahkan (dark), false jika dihapus (light)
            const isDark = html.classList.toggle('dark');
            
            localStorage.setItem('alipzzy_theme', isDark ? 'dark' : 'light');
            updateThemeIcon(isDark);
        }

        // Panggil fungsi ini sekali untuk mengatur ikon awal setelah semua DOM siap
        updateThemeIcon(document.documentElement.classList.contains('dark'));
        
        // Tambahkan event listener ke tombol
        themeToggle.addEventListener('click', toggleTheme);
        // --- Akhir Logika Dark/Light Mode ---


        // --- Navigasi Mobile (Sidebar) ---
        document.getElementById('openSidebar').addEventListener('click', () => {
            sidebar.classList.add('open');
            overlay.classList.remove('hidden');
        });

        document.getElementById('closeSidebar').addEventListener('click', () => {
            sidebar.classList.remove('open');
            overlay.classList.add('hidden');
        });

        overlay.addEventListener('click', () => {
            sidebar.classList.remove('open');
            overlay.classList.add('hidden');
        });

        // --- Logika Menu ---
        function handleMenuClick(action) {
            // Tutup sidebar setelah aksi
            sidebar.classList.remove('open');
            overlay.classList.add('hidden');

            if (action === 'CS') {
                window.open('https://t.me/AlipzzyOfficiaL', '_blank');
            } else if (action === 'Owner') {
                showModal('Owner Website', 'AlipzzyOfficiaL');
            } else if (action === 'About') {
                showModal('About AlipzzyShop', 'Hello, I am AlipzzyOfficial and I developed this website to help those of you who want to top up cheaply and very quickly without having to wait hours for your diamonds to come in.');
            }
        }

        function logout() {
            localStorage.removeItem('alipzzy_loggedInUser');
            window.location.href = 'Login.html';
        }


        // --- Logika Pemilihan Game ---
        function selectGame(gameName) {
            selectedGame = gameName;
            
            // Hapus highlight dari semua kartu
            document.querySelectorAll('.game-card').forEach(card => {
                card.classList.remove('border-indigo-500');
                card.classList.add('border-transparent');
            });

            // Berikan highlight pada kartu yang dipilih
            document.querySelector(`[data-game="${gameName}"]`).classList.add('border-indigo-500');
            document.querySelector(`[data-game="${gameName}"]`).classList.remove('border-transparent');

            // Tampilkan Form TopUp dan atur judul
            formTitle.textContent = `TopUp: ${gameName}`;
            topupFormContainer.classList.remove('hidden');
            
            // Scroll ke form
            topupFormContainer.scrollIntoView({ behavior: 'smooth' });

            // Berikan petunjuk ID Game yang spesifik
            let hint = '';
            if (gameName === 'Mobile Legend') {
                hint = 'Masukkan ID Game dan Server (cth: 12345678 (1234)).';
            } else if (gameName === 'Free Fire' || gameName === 'Pubg Mobile' || gameName === 'Valorant') {
                hint = `Masukkan ID ${gameName} Anda dengan benar.`;
            }
            idInputHint.textContent = hint;
        }

        // --- Logika Checkout (Simulasi) ---
        function checkout() {
            const gameID = document.getElementById('gameID').value;
            const nominalElement = document.querySelector('input[name="nominal"]:checked');
            
            if (!selectedGame) {
                showModal('Perhatian', 'Anda belum memilih game!');
                return;
            }

            if (!gameID) {
                showModal('Perhatian', 'Harap masukkan ID Game Anda.');
                return;
            }

            if (!nominalElement) {
                showModal('Perhatian', 'Harap pilih nominal TopUp.');
                return;
            }

            const nominal = nominalElement.value;
            const user = JSON.parse(localStorage.getItem('alipzzy_loggedInUser')).username;

            const content = `
                <p class="font-bold text-lg mb-2 text-green-600">TopUp Berhasil Disimulasikan!</p>
                <ul class="list-disc list-inside space-y-1 text-sm">
                    <li><strong>Game:</strong> ${selectedGame}</li>
                    <li><strong>ID Game:</strong> ${gameID}</li>
                    <li><strong>Nominal:</strong> ${nominal}</li>
                    <li><strong>Akun:</strong> ${user}</li>
                </ul>
                <p class="mt-4 text-sm text-gray-500 dark:text-gray-400">Dalam aplikasi nyata, Anda akan diarahkan ke pembayaran. Terima kasih telah TopUp di AlipzzyShop!</p>
            `;
            
            showModal('Status TopUp', content);
            
            // Reset form setelah simulasi checkout
            document.getElementById('gameID').value = '';
            // Pastikan nominal yang dipilih dibatalkan
            if (nominalElement) {
                nominalElement.checked = false;
                // Hapus style visual yang menandakan nominal terpilih
                nominalElement.closest('.nominal-card').classList.remove('ring-4', 'ring-indigo-300', 'bg-indigo-100');
            }
        }

        // Style untuk kartu nominal saat dipilih
        document.querySelectorAll('input[name="nominal"]').forEach(input => {
            input.addEventListener('change', (e) => {
                document.querySelectorAll('.nominal-card').forEach(card => {
                    card.classList.remove('ring-4', 'ring-indigo-300', 'bg-indigo-100');
                });
                if (e.target.checked) {
                    e.target.closest('.nominal-card').classList.add('ring-4', 'ring-indigo-300', 'bg-indigo-100');
                }
            });
        });
    </script>
</body>
</html>

